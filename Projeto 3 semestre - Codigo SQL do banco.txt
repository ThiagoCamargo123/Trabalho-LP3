/*

******* NOTA: CADASTRE QUALQUER GERENTE COM QUALQUER CPF, PELO POSTGRES, SENAO NAO DA PRA RODAR O CÓDIGO******

Caso necessario alterar banco
drop table cliente, compra, estoquista,gerente, prateleira,prateleira_estoquista,produto,produto_prateleira


*/


CREATE TABLE Cliente(
	cpf VARCHAR(20) PRIMARY KEY NOT NULL,
	nome VARCHAR(100) NOT NULL,
	telefone INT,
	rua VARCHAR(100),
	bairro VARCHAR(100),
	cidade VARCHAR(100),
	cep INT,
	email VARCHAR(100),
	senha VARCHAR(100)
);

CREATE TABLE Gerente(
	id INT PRIMARY KEY,
	cpf VARCHAR(20) UNIQUE NOT NULL,
	nome VARCHAR(100) NOT NULL
);

INSERT INTO gerente values(1,1234,'Chefe');

CREATE TABLE Estoquista(
	id INT PRIMARY KEY,
	cpf VARCHAR(20) UNIQUE NOT NULL,
	nome VARCHAR(100) NOT NULL,
	numeroContrato INT NOT NULL,
	cpf_gerente VARCHAR(20),
	senha_acesso int,
	FOREIGN KEY(cpf_gerente) references Gerente(cpf)
);

CREATE TABLE tipoProduto(
	id serial PRIMARY KEY,
	descricao varchar(100)
);

CREATE TABLE Produto(
	id serial PRIMARY KEY,
	tipo int,
	descricao varchar(100),
	altura FLOAT,
	largura FLOAT,
	profundidade FLOAT,
	preco FLOAT NOT NULL,
	estocado varchar(3) not null,
	preco_final int,
	FOREIGN KEY(tipo) references tipoProduto(id)
);

CREATE TABLE Compra(
	id SERIAl PRIMARY KEY,
	id_produto INT NOT NULL,
	cpf_cliente VARCHAR(20) NOT NULL,
	data_compra VARCHAR(20),
	hora_compra VARCHAR(20),
	valor_total Float,
	quantidade int,
	FOREIGN KEY(id_produto) REFERENCES Produto(id),
	FOREIGN KEY(cpf_cliente) REFERENCES Cliente(cpf)
);

CREATE TABLE Prateleira(
	id SERIAl PRIMARY KEY,
	volume int
);

CREATE TABLE Produto_Prateleira(
	id serial primary key,
	id_produto int not null,
	quant_ProdPrateleira INT,
	localidade varchar(2),
	FOREIGN KEY(id_produto) REFERENCES Produto(id)
);

insert into tipoProduto (descricao) values ('Automotivo');
insert into tipoProduto (descricao) values ('Beleza e cuidados pessoais');
insert into tipoProduto (descricao) values ('Brinquedos e jogos');
insert into tipoProduto (descricao) values ('Celulares e comunicação');
insert into tipoProduto (descricao) values ('Computadores e informática');
insert into tipoProduto (descricao) values ('Cozinha');
insert into tipoProduto (descricao) values ('Eletrônicos, TV, áudio');
insert into tipoProduto (descricao) values ('Esportes, aventura, lazer');
insert into tipoProduto (descricao) values ('Ferramentas e construção');
insert into tipoProduto (descricao) values ('Filmes, séries e música');
insert into tipoProduto (descricao) values ('Games e consoles');
insert into tipoProduto (descricao) values ('Livros');
insert into tipoProduto (descricao) values ('Papelaria e escritório');
insert into tipoProduto (descricao) values ('Pet Shop');
insert into tipoProduto (descricao) values ('Roupas, calçados e acessórios');

CREATE TABLE Carrinho(
	id serial primary key,
	id_produto int not null,
	cpf_cliente varchar(20) not null,
	quant INT,
	aberto varchar(1),
	FOREIGN KEY(id_produto) REFERENCES Produto(id),
	FOREIGN KEY(cpf_cliente) REFERENCES Cliente(cpf)
);