/*

******* NOTA: CADASTRE QUALQUER GERENTE COM QUALQUER CPF, PELO POSTGRES, SENAO NAO DA PRA RODAR O CÃ“DIGO******

Caso necessario alterar banco
drop table cliente, compra, estoquista,gerente, prateleira,prateleira_estoquista,produto,produto_prateleira


*/


CREATE TABLE Cliente(
	cpf VARCHAR(20) PRIMARY KEY NOT NULL,
	nome VARCHAR(100) NOT NULL,
	telefone INT,
	rua VARCHAR(100),
	bairro VARCHAR(100),
	cidade VARCHAR(100),
	cep INT,
	email VARCHAR(100),
	senha VARCHAR(100)
);

CREATE TABLE Gerente(
	id INT PRIMARY KEY,
	cpf VARCHAR(20) UNIQUE NOT NULL,
	nome VARCHAR(100) NOT NULL
);

INSERT INTO gerente values(1,1234,'Chefe');

CREATE TABLE Estoquista(
	id INT PRIMARY KEY,
	cpf VARCHAR(20) UNIQUE NOT NULL,
	nome VARCHAR(100) NOT NULL,
	numeroContrato INT NOT NULL,
	cpf_gerente VARCHAR(20),
	senha_acesso int,
	FOREIGN KEY(cpf_gerente) references Gerente(cpf)
);

CREATE TABLE Produto(
	id serial PRIMARY KEY,
	tipo VARCHAR(50),
	descricao varchar(100),
	altura FLOAT,
	largura FLOAT,
	profundidade FLOAT,
	preco FLOAT NOT NULL,
	estocado varchar(3) not null,
	preco_final int
);

CREATE TABLE Compra(
	id SERIAl PRIMARY KEY,
	id_produto INT NOT NULL,
	cpf_cliente VARCHAR(20) NOT NULL,
	data_compra VARCHAR(20),
	hora_compra VARCHAR(20),
	valor_total Float,
	quantidade int,
	FOREIGN KEY(id_produto) REFERENCES Produto(id),
	FOREIGN KEY(cpf_cliente) REFERENCES Cliente(cpf)
);

CREATE TABLE Prateleira(
	id SERIAl PRIMARY KEY,
	volume int
);

CREATE TABLE Produto_Prateleira(
	id serial primary key,
	id_produto int not null,
	quant_ProdPrateleira INT,
	localidade varchar(2),
	FOREIGN KEY(id_produto) REFERENCES Produto(id)
);